<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Player</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    position: relative;
    overflow-x: hidden;
    transition: background 0.6s ease;
  }

  body::before {
    content: '';
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: backgroundMove 20s linear infinite;
    pointer-events: none;
  }

  @keyframes backgroundMove {
    0% { transform: translate(0, 0); }
    100% { transform: translate(50px, 50px); }
  }

  .container {
    max-width: 1200px;
    width: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.6);
    position: relative;
    z-index: 1;
    transition: border 0.6s ease;
  }

  h1 {
    color: white;
    font-size: 2.5rem;
    margin-bottom: 30px;
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    font-weight: 700;
  }

  .view-controls {
    display: flex;
    gap: 12px;
    margin-bottom: 30px;
    justify-content: center;
  }

  .view-btn {
    padding: 12px 28px;
    border: 1px solid;
    color: white;
    cursor: pointer;
    border-radius: 50px;
    font-size: 1rem;
    font-weight: 600;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .view-btn:hover {
    transform: translateY(-2px);
  }

  /* Albums Grid */
  .albums-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 24px;
    margin-bottom: 30px;
  }

  .album-card {
    background: rgba(0, 0, 0, 0.5);
    border-radius: 16px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid;
    backdrop-filter: blur(10px);
  }

  .album-card:hover {
    transform: translateY(-8px);
  }

  .album-card img {
    width: 100%;
    height: 220px;
    object-fit: cover;
    border-radius: 12px;
    margin-bottom: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }

  .album-card p {
    color: white;
    font-weight: 600;
    font-size: 1.1rem;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }

  /* Track List */
  .track-view {
    animation: fadeIn 0.4s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .track-header {
    display: flex;
    align-items: center;
    gap: 24px;
    margin-bottom: 30px;
    padding: 24px;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 16px;
    backdrop-filter: blur(10px);
    border: 1px solid;
  }

  .track-header img {
    width: 150px;
    height: 150px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
  }

  .track-header h2 {
    color: white;
    font-size: 2rem;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
  }

  .tracks {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .track-item {
    padding: 16px 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    border: 1px solid transparent;
  }

  .track-item:hover {
    transform: translateX(4px);
  }

  .track-number {
    font-weight: 600;
    min-width: 30px;
  }

  .track-title {
    color: white;
    font-weight: 500;
    flex: 1;
  }

  .track-item.current .track-title {
    font-weight: 700;
  }

  .play-icon {
    opacity: 0;
    color: white;
    font-size: 1.2rem;
  }

  .track-item:hover .play-icon,
  .track-item.current .play-icon {
    opacity: 1;
  }

  /* Player Controls */
  .player-section {
    margin-top: 40px;
    padding-top: 30px;
    border-top: 1px solid;
  }

  .now-playing {
    text-align: center;
    margin-bottom: 20px;
  }

  .now-playing-label {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.9rem;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .now-playing-title {
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }

  /* Progress Bar */
  .progress-container {
    margin-bottom: 24px;
    padding: 0 8px;
  }

  .time-display {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.85rem;
    font-weight: 500;
  }

  .progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    width: 0%;
    border-radius: 4px;
    transition: width 0.1s linear;
    position: relative;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 14px;
    height: 14px;
    background: white;
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.2s;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  .progress-bar:hover .progress-fill::after {
    opacity: 1;
  }

  .player-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
  }

  .player-controls button {
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid;
    cursor: pointer;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    font-size: 1.3rem;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
    color: white;
  }

  .player-controls button:hover {
    transform: scale(1.1);
  }

  .player-controls button.play-pause {
    width: 72px;
    height: 72px;
    font-size: 1.8rem;
    border: 2px solid;
  }

  .status {
    text-align: center;
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.95rem;
    margin-top: 12px;
  }

  .back-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid;
    cursor: pointer;
    border-radius: 50px;
    font-size: 0.95rem;
    margin-bottom: 20px;
    transition: all 0.3s ease;
    color: white;
  }

  .back-btn:hover {
    transform: translateX(-4px);
  }

  /* Hidden audio element */
  #audio {
    display: none;
  }

  @media (max-width: 768px) {
    .container {
      padding: 24px;
    }

    h1 {
      font-size: 2rem;
    }

    .albums-grid {
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 16px;
    }

    .track-header {
      flex-direction: column;
      text-align: center;
    }
  }
</style>
</head>
<body>

<div class="container">
  <h1>üéµ Music Player</h1>

  <div id="view"></div>

  <div class="player-section">
    <div class="now-playing">
      <div class="now-playing-label">Now Playing</div>
      <div class="now-playing-title" id="nowPlayingTitle">Select a track</div>
    </div>

    <div class="progress-container">
      <div class="time-display">
        <span id="currentTime">0:00</span>
        <span id="duration">0:00</span>
      </div>
      <div class="progress-bar" id="progressBar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <div class="player-controls">
      <button onclick="prev()" title="Previous">‚èÆ</button>
      <button class="play-pause" onclick="playPause()" title="Play/Pause">‚ñ∂</button>
      <button onclick="next()" title="Next">‚è≠</button>
    </div>

    <p class="status" id="status">Ready to play</p>
  </div>
</div>

<audio id="audio"></audio>

<script>
// ====== DATA ======
const albums = [
  {
    title: "Nevermind ‚Äî Nirvana",
    cover: "https://upload.wikimedia.org/wikipedia/en/b/b7/NirvanaNevermindalbumcover.jpg",
    theme: {
      background: "linear-gradient(135deg, #1e3a5f 0%, #2d5a8c 50%, #4a7ba7 100%)",
      primary: "#4a7ba7",
      primaryRgb: "74, 123, 167",
      accent: "#6ba3d4"
    },
    tracks: [
      {title: "Smells Like Teen Spirit", file: "audio/smells_like_teen_spirit.mp3"},
      {title: "In Bloom", file: "audio/in_bloom.mp3"},
      {title: "Come As You Are", file: "audio/come_as_you_are.mp3"},
      {title: "Breed", file: "audio/breed.mp3"},
      {title: "Lithium", file: "audio/lithium.m4a"},
      {title: "Polly", file: "audio/polly.m4a"},
      {title: "Territorial Pissing", file: "audio/territorial_pissings.m4a"},
      {title: "Drain You", file: "audio/drain_you.mp3"},
      {title: "Lounge Act", file: "audio/lounge_act.mp3"},
      {title: "Stay Away", file: "audio/stay_away.m4a"},
      {title: "On A Plain", file: "audio/on_a_plain.m4a"},
      {title: "Something In The Way", file: "audio/something_in_the_way.m4a"},
    ]
  },
  {
    title: "Bleach ‚Äî Nirvana",
    cover: "https://archive.org/details/11sifting_202001",
    theme: {
      background: "linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2d2d2d 100%)",
      primary: "#ffffff",
      primaryRgb: "255, 255, 255",
      accent: "#cccccc"
    },
    tracks: [
      {title: "Blew", file: "audio/blew.m4a"},
      {title: "Floyd the Barber", file: "audio/barber.m4a"},
      {title: "About a Girl", file: "audio/abt.m4a"},
      {title: "School", file: "audio/school.m4a"},
      {title: "Love Buzz", file: "audio/lovebuzz.m4a"},
      {title: "Paper Cuts", file: "audio/paper.m4a"},
      {title: "Negative Creep", file: "audio/negative.m4a"},
      {title: "Scoff", file: "audio/scoff.m4a"},
      {title: "Swap Meet", file: "audio/swap.m4a"},
      {title: "Mr. Moustache", file: "audio/mrm.m4a"},
      {title: "Sifting", file: "audio/sift.m4a"},
      {title: "Big Cheese", file: "audio/bigcheese.m4a"},
      {title: "Downer", file: "audio/down.m4a"},
    ]
  }
];

let currentAlbumIndex = 0;
let currentTrackIndex = 0;
const audio = document.getElementById("audio");
const viewDiv = document.getElementById("view");
const status = document.getElementById("status");
const nowPlayingTitle = document.getElementById("nowPlayingTitle");
const progressBar = document.getElementById("progressBar");
const progressFill = document.getElementById("progressFill");
const currentTimeEl = document.getElementById("currentTime");
const durationEl = document.getElementById("duration");

// ====== THEME FUNCTIONS ======
function applyTheme(albumIndex) {
  const theme = albums[albumIndex].theme;
  document.body.style.background = theme.background;
  
  // Update CSS custom properties for dynamic theming
  document.documentElement.style.setProperty('--primary-color', theme.primary);
  document.documentElement.style.setProperty('--primary-rgb', theme.primaryRgb);
  document.documentElement.style.setProperty('--accent-color', theme.accent);
  
  // Update container border
  const container = document.querySelector('.container');
  container.style.borderColor = `rgba(${theme.primaryRgb}, 0.3)`;
  
  // Update all themed elements
  updateThemedElements(theme);
}

function updateThemedElements(theme) {
  // View buttons
  document.querySelectorAll('.view-btn').forEach(btn => {
    btn.style.background = `rgba(${theme.primaryRgb}, 0.2)`;
    btn.style.borderColor = `rgba(${theme.primaryRgb}, 0.4)`;
    if (btn.classList.contains('active')) {
      btn.style.background = theme.primary;
      btn.style.borderColor = `rgba(${theme.primaryRgb}, 0.8)`;
      btn.style.color = theme.primary === '#ffffff' ? '#000' : '#fff';
    }
  });
  
  // Album cards
  document.querySelectorAll('.album-card').forEach(card => {
    card.style.borderColor = `rgba(${theme.primaryRgb}, 0.2)`;
  });
  
  // Track items
  document.querySelectorAll('.track-item').forEach(item => {
    if (item.classList.contains('current')) {
      item.style.background = `rgba(${theme.primaryRgb}, 0.25)`;
      item.style.borderColor = `rgba(${theme.primaryRgb}, 0.6)`;
    }
  });
  
  // Track numbers
  document.querySelectorAll('.track-number').forEach(num => {
    num.style.color = `rgba(${theme.primaryRgb}, 0.7)`;
  });
  
  document.querySelectorAll('.track-item.current .track-number').forEach(num => {
    num.style.color = theme.primary;
  });
  
  // Player section
  const playerSection = document.querySelector('.player-section');
  if (playerSection) {
    playerSection.style.borderTopColor = `rgba(${theme.primaryRgb}, 0.3)`;
  }
  
  // Player controls
  document.querySelectorAll('.player-controls button').forEach(btn => {
    btn.style.borderColor = `rgba(${theme.primaryRgb}, 0.4)`;
    btn.style.color = theme.primary;
    
    if (btn.classList.contains('play-pause')) {
      btn.style.background = theme.primary;
      btn.style.color = theme.primary === '#ffffff' ? '#000' : '#fff';
      btn.style.boxShadow = `0 4px 16px rgba(${theme.primaryRgb}, 0.4)`;
    }
  });
  
  // Progress bar
  progressFill.style.background = theme.primary;
  
  // Back button
  const backBtn = document.querySelector('.back-btn');
  if (backBtn) {
    backBtn.style.borderColor = `rgba(${theme.primaryRgb}, 0.4)`;
    backBtn.style.color = theme.primary;
  }
  
  // Track header
  const trackHeader = document.querySelector('.track-header');
  if (trackHeader) {
    trackHeader.style.borderColor = `rgba(${theme.primaryRgb}, 0.3)`;
  }
}

// ====== FUNCTIONS ======

// Show albums view
function showAlbums() {
  viewDiv.innerHTML = `
    <div class="albums-grid">
      ${albums.map((album, i) => `
        <div class="album-card" onclick="showTracks(${i})">
          <img src="${album.cover}" alt="${album.title}">
          <p>${album.title}</p>
        </div>
      `).join('')}
    </div>
  `;
  updateThemedElements(albums[currentAlbumIndex].theme);
}

// Show tracks for an album
function showTracks(albumIndex) {
  currentAlbumIndex = albumIndex;
  const album = albums[albumIndex];
  applyTheme(albumIndex);
  
  viewDiv.innerHTML = `
    <button class="back-btn" onclick="showAlbums()">‚Üê Back to Albums</button>
    <div class="track-view">
      <div class="track-header">
        <img src="${album.cover}" alt="${album.title}">
        <h2>${album.title}</h2>
      </div>
      <div class="tracks">
        ${album.tracks.map((track, i) => `
          <div class="track-item" onclick="playTrack(${i})">
            <span class="track-number">${i + 1}</span>
            <span class="track-title">${track.title}</span>
            <span class="play-icon">‚ñ∂</span>
          </div>
        `).join('')}
      </div>
    </div>
  `;
  
  updateTrackUI();
}

// Play specific track
function playTrack(trackIndex) {
  currentTrackIndex = trackIndex;
  loadTrack();
  audio.play();
}

// Load current track
function loadTrack() {
  const album = albums[currentAlbumIndex];
  const track = album.tracks[currentTrackIndex];
  audio.src = track.file;
  nowPlayingTitle.textContent = track.title;
  status.textContent = `${album.title} ‚Ä¢ ${track.title}`;
  updateTrackUI();
}

// Update track list highlighting
function updateTrackUI() {
  const trackItems = document.querySelectorAll(".track-item");
  const theme = albums[currentAlbumIndex].theme;
  
  trackItems.forEach((el, i) => {
    if (i === currentTrackIndex) {
      el.classList.add("current");
      el.style.background = `rgba(${theme.primaryRgb}, 0.25)`;
      el.style.borderColor = `rgba(${theme.primaryRgb}, 0.6)`;
    } else {
      el.classList.remove("current");
      el.style.background = "rgba(0, 0, 0, 0.3)";
      el.style.borderColor = "transparent";
    }
  });
  
  // Update track numbers
  document.querySelectorAll('.track-number').forEach((num, i) => {
    if (i === currentTrackIndex) {
      num.style.color = theme.primary;
    } else {
      num.style.color = `rgba(${theme.primaryRgb}, 0.7)`;
    }
  });
}

// Play / pause toggle
function playPause() {
  const playBtn = document.querySelector(".play-pause");
  
  if (audio.src) {
    if (audio.paused) {
      audio.play();
      playBtn.textContent = "‚è∏";
      status.textContent = "‚ñ∂ Playing";
    } else {
      audio.pause();
      playBtn.textContent = "‚ñ∂";
      status.textContent = "‚è∏ Paused";
    }
  } else {
    // Load first track if none selected
    currentAlbumIndex = 0;
    currentTrackIndex = 0;
    applyTheme(0);
    loadTrack();
    audio.play();
    playBtn.textContent = "‚è∏";
  }
}

// Next / Prev
function next() {
  const album = albums[currentAlbumIndex];
  currentTrackIndex = (currentTrackIndex + 1) % album.tracks.length;
  loadTrack();
  audio.play();
  document.querySelector(".play-pause").textContent = "‚è∏";
}

function prev() {
  const album = albums[currentAlbumIndex];
  currentTrackIndex = (currentTrackIndex - 1 + album.tracks.length) % album.tracks.length;
  loadTrack();
  audio.play();
  document.querySelector(".play-pause").textContent = "‚è∏";
}

// Format time (seconds to mm:ss)
function formatTime(seconds) {
  if (isNaN(seconds)) return "0:00";
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs.toString().padStart(2, '0')}`;
}

// ====== PROGRESS BAR INTERACTION ======
progressBar.addEventListener('click', (e) => {
  if (!audio.src) return;
  
  const rect = progressBar.getBoundingClientRect();
  const percent = (e.clientX - rect.left) / rect.width;
  const newTime = percent * audio.duration;
  
  audio.currentTime = newTime;
});

// ====== AUDIO EVENTS ======
audio.addEventListener("loadedmetadata", () => {
  durationEl.textContent = formatTime(audio.duration);
});

audio.addEventListener("timeupdate", () => {
  if (audio.duration) {
    const percent = (audio.currentTime / audio.duration) * 100;
    progressFill.style.width = percent + '%';
    currentTimeEl.textContent = formatTime(audio.currentTime);
  }
});

audio.addEventListener("ended", () => {
  next();
});

audio.addEventListener("play", () => {
  document.querySelector(".play-pause").textContent = "‚è∏";
  status.textContent = "‚ñ∂ Playing";
});

audio.addEventListener("pause", () => {
  document.querySelector(".play-pause").textContent = "‚ñ∂";
  status.textContent = "‚è∏ Paused";
});

// Initialize
applyTheme(0);
showAlbums();
</script>

</body>
</html>
