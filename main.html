<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Music Player</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: white;
    margin: 0;
    padding: 20px;
  }
  header {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
  }
  button.view-btn {
    padding: 10px 20px;
    background: #1db954;
    border: none;
    color: white;
    cursor: pointer;
    border-radius: 4px;
  }
  .album, .liked {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
  .album-card {
    width: 200px;
    cursor: pointer;
    text-align: center;
  }
  .album-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }
  .tracks div, .liked div {
    padding: 6px;
    cursor: pointer;
  }
  .tracks div:hover, .liked div:hover {
    background: #1db95433;
  }
  .current { color: #1DB954; font-weight: bold; }
  .player-controls { margin-top: 20px; }
  .player-controls button { margin: 5px; padding: 8px 14px; }
</style>
</head>
<body>

<h1>Mini Music Player</h1>

<header>
  <button class="view-btn" onclick="showAlbums()">Albums</button>
  <button class="view-btn" onclick="showLiked()">Liked Songs</button>
</header>

<div id="view"></div>

<div class="player-controls">
  <button onclick="prev()">⏮ Prev</button>
  <button onclick="playPause()">▶ / ⏸</button>
  <button onclick="next()">⏭ Next</button>
</div>

<audio id="audio" controls style="width: 80%; margin-top: 10px;"></audio>
<p id="status">Ready</p>

<script>
// ====== DATA ======

// Example albums (add new albums by adding objects here)
const albums = [
  {
    title: "Nevermind — Nirvana",
    cover: "https://upload.wikimedia.org/wikipedia/en/b/b7/NirvanaNevermindalbumcover.jpg",
    tracks: [
      {title: "Smells Like Teen Spirit", file: "audio/teen_spirit.mp3"},
      {title: "In Bloom", file: "audio/in_bloom.mp3"},
      {title: "Come As You Are", file: "audio/come_as_you_are.mp3"}
    ]
  },
  {
    title: "Sample Album",
    cover: "https://via.placeholder.com/200x200.png?text=Album+Cover",
    tracks: [
      {title: "Track 1", file: "audio/sample1.mp3"},
      {title: "Track 2", file: "audio/sample2.mp3"}
    ]
  }
];

// Liked songs array
let likedSongs = [];

// ====== STATE ======
let currentAlbumIndex = 0;
let currentTrackIndex = 0;
let currentView = "albums"; // "albums" or "liked"

const audio = document.getElementById("audio");
const viewDiv = document.getElementById("view");
const status = document.getElementById("status");

// ====== FUNCTIONS ======

// Show albums view
function showAlbums() {
  currentView = "albums";
  viewDiv.innerHTML = "";
  albums.forEach((album, i) => {
    const div = document.createElement("div");
    div.className = "album-card";
    div.innerHTML = `<img src="${album.cover}"><p>${album.title}</p>`;
    div.onclick = () => showTracks(i);
    viewDiv.appendChild(div);
  });
}

// Show tracks for an album
function showTracks(albumIndex) {
  currentAlbumIndex = albumIndex;
  currentTrackIndex = 0;
  const album = albums[albumIndex];
  viewDiv.innerHTML = `<h2>${album.title}</h2>`;
  const trackList = document.createElement("div");
  trackList.className = "tracks";
  album.tracks.forEach((track, i) => {
    const t = document.createElement("div");
    t.textContent = track.title;
    t.onclick = () => { currentTrackIndex = i; loadTrack(); audio.play(); };
    trackList.appendChild(t);
  });
  viewDiv.appendChild(trackList);
  loadTrack();
}

// Load current track
function loadTrack() {
  const album = albums[currentAlbumIndex];
  const track = album.tracks[currentTrackIndex];
  audio.src = track.file;
  status.textContent = "Selected: " + track.title;
  updateTrackUI();
}

// Update track list UI highlighting
function updateTrackUI() {
  if(currentView === "albums") {
    const trackDivs = document.querySelectorAll(".tracks div");
    trackDivs.forEach((el, i) => {
      el.className = i === currentTrackIndex ? "current" : "";
    });
  }
}

// Play / pause toggle
function playPause() {
  if(audio.paused) {
    audio.play();
    status.textContent = "▶ Playing: " + albums[currentAlbumIndex].tracks[currentTrackIndex].title;
  } else {
    audio.pause();
    status.textContent = "⏸ Paused: " + albums[currentAlbumIndex].tracks[currentTrackIndex].title;
  }
}

// Next / Prev
function next() {
  const album = albums[currentAlbumIndex];
  currentTrackIndex = (currentTrackIndex + 1) % album.tracks.length;
  loadTrack();
  audio.play();
}

function prev() {
  const album = albums[currentAlbumIndex];
  currentTrackIndex = (currentTrackIndex - 1 + album.tracks.length) % album.tracks.length;
  loadTrack();
  audio.play();
}

// Like / Unlike current track
function toggleLike() {
  const track = albums[currentAlbumIndex].tracks[currentTrackIndex];
  if(!likedSongs.includes(track)) {
    likedSongs.push(track);
  }
}

// Show liked songs
function showLiked() {
  currentView = "liked";
  viewDiv.innerHTML = "<h2>Liked Songs</h2>";
  const likedDiv = document.createElement("div");
  likedDiv.className = "liked";
  likedSongs.forEach((track, i) => {
    const t = document.createElement("div");
    t.textContent = track.title;
    t.onclick = () => {
      // Find which album it belongs to
      albums.forEach((album, ai) => {
        const idx = album.tracks.indexOf(track);
        if(idx >= 0) {
          currentAlbumIndex = ai;
          currentTrackIndex = idx;
          loadTrack();
          audio.play();
        }
      });
    };
    likedDiv.appendChild(t);
  });
  viewDiv.appendChild(likedDiv);
}

// Initialize
showAlbums();
</script>

</body>
</html>
